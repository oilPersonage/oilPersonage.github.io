"use strict";(self["webpackChunkautoinline"]=self["webpackChunkautoinline"]||[]).push([[429],{1429:(t,e,a)=>{a.r(e),a.d(e,{default:()=>q});var n=a(3673);const o={class:"page"};function l(t,e,a,l,i,u){const d=(0,n.up)("AddTariff"),s=(0,n.up)("AiHeader"),m=(0,n.up)("TariffsAutoSchoolTable");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(s,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d)])),_:1}),(0,n._)("div",o,[(0,n.Wm)(m)])],64)}function i(t,e,a,o,l,i){const u=(0,n.up)("AiTable"),d=(0,n.up)("ModalContent");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(u,{data:t.data,loading:t.loading,onChangeItem:t.onChange,onDelete:t.onDelete},null,8,["data","loading","onChangeItem","onDelete"]),(0,n.Wm)(d,{open:t.open,tableData:t.tableData,toggleOpen:t.toggleOpen},null,8,["open","tableData","toggleOpen"])],64)}var u=a(3617),d=a(7923),s=(a(71),a(8880));const m={class:"addTariff__content row"},p={class:"addTariff__input"},r={class:"addTariff__input"},f={class:"addTariff__input"},c={class:"modal__buttons row"};function g(t,e,a,o,l,i){const u=(0,n.up)("AiInput"),d=(0,n.up)("AiButton"),g=(0,n.up)("AiModal");return(0,n.wg)(),(0,n.j4)(g,{open:t.open,title:t.modelTitle,isSave:"",onToggleOpen:t.toggleOpen},{default:(0,n.w5)((()=>[(0,n._)("form",{onSubmit:e[3]||(e[3]=(0,s.iM)(((...e)=>t.onSubmit&&t.onSubmit(...e)),["prevent"]))},[(0,n._)("div",m,[(0,n._)("div",p,[(0,n.Wm)(u,{value:t.data.min_amount,"onUpdate:value":e[0]||(e[0]=e=>t.data.min_amount=e),max:32767,min:0,name:"min_amount",required:"",title:"От",type:"number"},null,8,["value"])]),(0,n._)("div",r,[(0,n.Wm)(u,{value:t.data.max_amount,"onUpdate:value":e[1]||(e[1]=e=>t.data.max_amount=e),max:32767,min:0,name:"max_amount",required:"",title:"До",type:"number"},null,8,["value"])]),(0,n._)("div",f,[(0,n.Wm)(u,{value:t.data.cost,"onUpdate:value":e[2]||(e[2]=e=>t.data.cost=e),name:"cost",required:"",title:"Цена за 1 доступ",type:"number"},null,8,["value"])])]),(0,n._)("div",c,[(0,n.Wm)(d,{isSave:"",size:"big",text:"Сохранить",type:"submit"})])],32)])),_:1},8,["open","title","onToggleOpen"])}var h=a(2337),_=a(3645),b=a(3373);const T=(0,n.aZ)({name:"",components:{AiModal:b.Z,AiButton:_.Z,AiInput:h.Z},props:{open:{type:Boolean},toggleOpen:{type:Function},tableData:{default:null}},data(){return{data:{min_amount:null,max_amount:null,cost:""}}},watch:{tableData(){this.data={...this.tableData}}},computed:{...(0,u.Se)({districtList:"cities/getDistricts"}),modelTitle(){return this.tableData?"Редактирование тарифа":"Добавление тарифа"}},methods:{...(0,u.nv)({postTariff:"autoSchool/postTariffs",updateTariff:"autoSchool/updateTariff"}),updateValue(t,e){this.data[t]=e},async onSubmit(){try{this.tableData?await this.updateTariff({...this.data}):await this.postTariff(this.data),this.toggleOpen(),this.data={min_amount:null,max_amount:null,cost:""}}catch(t){}}}});var v=a(4260);const A=(0,v.Z)(T,[["render",g],["__scopeId","data-v-8859ac86"]]),D=A,S=[{name:"from",required:!0,label:"От",align:"left",field:"min_amount",style:"width: 30%"},{name:"before",align:"left",label:"До",field:"max_amount",style:"width: 30%"},{name:"timezone",label:"Цена",field:"cost",align:"left",style:"width: 30%"},{name:"action",label:"Action",field:"action",style:"width: 98px",align:"center"}],w=(0,n.aZ)({name:"Table",components:{AiTable:d.Z,ModalContent:D},data(){return{open:!1,tableData:null}},computed:{...(0,u.Se)({getTariffs:"autoSchool/getTariffs",loading:"autoSchool/loading"}),data(){return{columns:S,rows:this.getTariffs}}},methods:{...(0,u.nv)({fetchTariffs:"autoSchool/fetchTariffs",onDelete:"autoSchool/deleteTariff"}),toggleOpen(){this.open=!this.open,this.tableData=null},onChange(t){this.tableData={min_amount:t.min_amount,max_amount:t.max_amount,cost:t.cost,id:t.id},this.open=!this.open}},mounted(){this.fetchTariffs()}}),O=(0,v.Z)(w,[["render",i]]),Z=O;function x(t,e,a,o,l,i){const u=(0,n.up)("AiAddItem"),d=(0,n.up)("ModalContent");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(u,{length:t.tariffs.length,open:t.open,toggleOpen:t.toggleOpen,title:"Тарифы для автошкол"},null,8,["length","open","toggleOpen"]),(0,n.Wm)(d,{open:t.open,toggleOpen:t.toggleOpen},null,8,["open","toggleOpen"])],64)}var y=a(8229);const W=(0,n.aZ)({name:"AddTariff",components:{AiAddItem:y.Z,ModalContent:D},data(){return{open:!1}},computed:{...(0,u.Se)({tariffs:"autoSchool/getTariffs"})},methods:{toggleOpen(){this.open=!this.open}}}),C=(0,v.Z)(W,[["render",x]]),I=C,M=(0,n.aZ)({name:"TariffsAutoSchool",components:{TariffsAutoSchoolTable:Z,AddTariff:I}}),k=(0,v.Z)(M,[["render",l]]),q=k}}]);
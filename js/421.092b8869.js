"use strict";(self["webpackChunkautoinline"]=self["webpackChunkautoinline"]||[]).push([[421],{3805:(t,e,i)=>{i.d(e,{Z:()=>b});var a=i(3673);const n={class:"addCity__content"},l={class:"addCity__input"},o={class:"addCity__input"},s={class:"modal__buttons row"};function d(t,e,i,d,u,c){const r=(0,a.up)("AiInput"),p=(0,a.up)("AiSelect"),g=(0,a.up)("AiButton"),h=(0,a.up)("AiModal");return(0,a.wg)(),(0,a.j4)(h,{open:t.open,title:t.modelTitle,isSave:"",onToggleOpen:t.toggleOpen},{default:(0,a.w5)((()=>[(0,a._)("div",n,[(0,a._)("div",l,[(0,a.Wm)(r,{value:t.data.title,"onUpdate:value":e[0]||(e[0]=e=>t.data.title=e),required:"",name:"slug",title:"Наименование"},null,8,["value"])]),(0,a._)("div",o,[(0,a.Wm)(p,{options:t.districtList,selectValue:t.data.district_id,label:"Федеральный округ",name:"district",required:"","onUpdate:selectValue":e[1]||(e[1]=e=>t.updateValue("district_id",e))},null,8,["options","selectValue"])])]),(0,a._)("div",s,[(0,a.Wm)(g,{isSave:"",size:"big",text:"Сохранить",onClick:t.onSubmit},null,8,["onClick"])])])),_:1},8,["open","title","onToggleOpen"])}var u=i(3617),c=i(4512),r=i(455),p=i(9040);const g=(0,a.aZ)({name:"",components:{AiModal:p.Z,AiButton:r.Z,AiInput:c.Z},props:{open:{type:Boolean},toggleOpen:{type:Function},tableData:{default:null}},data(){return{data:{title:"",district_id:""}}},watch:{tableData(){this.data={...this.tableData}}},computed:{...(0,u.Se)({districtList:"cities/getDistricts"}),modelTitle(){return this.tableData?`Редактирование региона - ${this.tableData.title}`:"Добавление региона"}},methods:{...(0,u.nv)({postRegion:"cities/postRegion",updateRegion:"cities/updateRegion"}),updateValue(t,e){this.data[t]=e},async onSubmit(){const t={...this.data,district_id:this.data.district_id.id};this.tableData?await this.updateRegion(t):await this.postRegion(t),this.toggleOpen(),this.data={title:"",district_id:""}}}});var h=i(4260);const m=(0,h.Z)(g,[["render",d],["__scopeId","data-v-27078e72"]]),b=m},2421:(t,e,i)=>{i.r(e),i.d(e,{default:()=>D});var a=i(3673);function n(t,e,i,n,l,o){const s=(0,a.up)("Table");return(0,a.wg)(),(0,a.j4)(s)}function l(t,e,i,n,l,o){const s=(0,a.up)("AiTable"),d=(0,a.up)("ModalContent");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(s,{data:t.data,showDeleteName:"label",loading:t.isLoading,onChangeItem:t.onChange,onDelete:t.onDelete},null,8,["data","loading","onChangeItem","onDelete"]),(0,a.Wm)(d,{open:t.open,tableData:t.tableData,toggleOpen:t.toggleOpen},null,8,["open","tableData","toggleOpen"])],64)}var o=i(1959);const s=[{name:"title",required:!0,label:"Регион",align:"left",field:"title",style:"width: 30%"},{name:"district",align:"left",label:"Федеральный округ",field:"district",format:t=>t.title,style:"width: 70%"},{name:"action",label:"Action",field:"action",style:"width: 98px",align:"center"}];var d=i(3617),u=i(7520),c=i(3805);const r=(0,a.aZ)({name:"RegionTable",components:{AiTable:u.Z,ModalContent:c.Z},data(){return{open:(0,o.iH)(!1),tableData:null}},computed:{...(0,d.Se)({regionList:"cities/getRegions",isLoading:"cities/isLoadAll"}),data(){return{rows:this.regionList,columns:s}}},methods:{...(0,d.nv)({getRegions:"cities/getRegions",getDistricts:"cities/getDistricts",onDelete:"cities/deleteRegion"}),toggleOpen(){this.open=!this.open,this.tableData=null},onChange(t){this.getDistricts(),this.tableData={title:t.title,district_id:{id:t.district.id,label:t.district.title},id:t.id},this.open=!this.open}},mounted(){this.getRegions(!0)}});var p=i(4260);const g=(0,p.Z)(r,[["render",l]]),h=g,m=(0,a.aZ)({name:"Region",components:{Table:h},setup(t){return{}}}),b=(0,p.Z)(m,[["render",n]]),D=b}}]);